// Booteamos el servidor
s.boot

// Nota inicial La 220
(
Pbind(
	\dur, 0.3,
	\freq, Pseq(#[220])
).play;
)

// Afinación pitágorica
// Como ejemplo tenemos la octava La220 - La440(446) de la parte 1 de la tarea
(
Pbind(
	\dur, 0.3,
	\freq, Pseq(#[220, 234.9312890625, 247.5, 264.29770019531, 278.4375, 297.33491271973, 313.24171875, 330, 352.39693359375, 371.25, 396.44655029296, 417.655625, 440])
).play;
)

// Temperamento Igual
// En el temperamento igual cada nota esta separada por el mismo ratio, el cual es la 12va raiz de 2, lo cual es 1.0594630943592953, esto para que al llegar a la doceava nota, que sería el siguiente "La", la diferencia sea exactamente por un factor de 2, y caiga en el "La 440" en nuestro ejemplo
220 //la 220
1.0594630943592953 * 220 //la# 233.08188076
1.0594630943592953 * 233.08188076 //si 246.94165063
1.0594630943592953 * 246.94165063 //do 261.6255653
1.0594630943592953 * 261.6255653 //do# 277.18263098
1.0594630943592953 * 277.18263098 //re 293.66476792
1.0594630943592953 * 293.66476792 //re# 311.12698372
1.0594630943592953 * 311.12698372 //mi 329.62755691
1.0594630943592953 * 329.62755691 //fa 349.22823143
1.0594630943592953 * 349.22823143 //fa# 369.99442271
1.0594630943592953 * 369.99442271 //sol 391.99543598
1.0594630943592953 * 391.99543598 //sol# 415.30469758
1.0594630943592953 * 415.30469758 //la 440

// Esta octava suena asi
(
Pbind(
	\dur, 0.3,
	\freq, Pseq(# [220, 233.08188076, 246.94165063, 261.6255653, 277.18263098, 293.66476792, 311.12698372, 329.62755691, 349.22823143, 369.99442271, 391.99543598, 415.30469758, 440])
).play;
)

// Temperamento mesotonico de un cuarto de coma
// En este caso el ratio difiere a la pitagorica y es la raiz cuarta de 5 que es igual a 1.4953487812212205
// Nota inicial La55
(
Pbind(
	\dur, 0.3,
	\freq, Pseq(#[55])
).play;
)

// Escala subiendo por quintas a 1.4953487812212205
55 // la 55
1.4953487812212205 * 55 //mi 82.24418297
1.4953487812212205 * 82.24418297 //si 122.98373876
1.4953487812212205 * 122.98373876 //fa# 183.90358387
1.4953487812212205 * 183.90358387 //do# 275
1.4953487812212205 * 275 //sol# 411.22091484
1.4953487812212205 * 411.22091484 //re# 614.91869381
1.4953487812212205 * 614.91869381 //la# 919.51791934
1.4953487812212205 * 919.51791934 //fa 1375
1.4953487812212205 * 1375 //do 2056.10457418
1.4953487812212205 * 2056.10457418 //sol 3074.59346906
1.4953487812212205 * 3074.59346906 //re 4597.58959671
1.4953487812212205 * 4597.58959671 //la 6875

// La cual se escucha asi
(
Pbind(
	\dur, 0.3,
	\freq, Pseq(# [55, 82.24418297, 122.98373876, 183.90358387, 275, 411.22091484, 614.91869381, 919.51791934, 1375,
		2056.10457418, 3074.59346906, 4597.58959671, 6875])
).play;
)

// Y si queremos la octava La220 a La440
// la 220
55 * 2 * 2
//mi 82.24418297 -> mi 328.97673188
82.24418297 * 2 * 2
//si 122.98373876 -> 245.96747752
122.98373876 * 2
//fa# 183.90358387 -> fa# 367.80716774
183.90358387 * 2
//do# 275 -> do# 275 - No se modifica
275
//sol# 411.22091484 - sol# 411.22091484 - No se modifica
411.22091484
//re# 614.91869381 - re# 307.459346905
614.91869381 / 2
//la# 919.51791934 - la# 229.879479835
919.51791934 / 2 / 2
//fa 1375 -> fa 343.75
1375 / 2 / 2
//do 2056.10457418 -> do 257.0130717725
2056.10457418 / 2 / 2 / 2
//sol 3074.59346906 -> 384.3241836325
3074.59346906 / 2 / 2 / 2
//re 4597.58959671 -> re 287.34934979437
4597.58959671 / 2 / 2 / 2 / 2
//la 6875 -> la 429.6875 la cual ajustamos a la440
6875 / 2 / 2 / 2 / 2

//la octava sonaría así
(
Pbind(
	\dur, 0.3,
	\freq, Pseq(# [220, 328.97673188, 245.96747752, 367.80716774, 275, 411.22091484 , 307.459346905, 229.879479835, 343.75, 257.0130717725, 384.3241836325, 287.34934979437, 440])
).play;
)

// Y en el orden correcto
(
Pbind(
	\dur, 0.3,
	\freq, Pseq(# [220, 229.879479835, 245.96747752, 257.0130717725, 275, 287.34934979437, 307.459346905, 328.97673188, 343.75, 367.80716774, 384.3241836325, 411.22091484, 440])
).play;
)

//Werckmeister I
// Podemos calcular la distancia en cents entre dos frecuencias dada la siguiente formula
// cents = 1200 * log_2(f2/f1)
// ahora si tenemos la frecuenia f1, y la distancia en cents, podemos calcular la  frecuencia f2 al despejarla de la formula anterior, obteniendo la siguiente
//  2 ^ ((cents + (1200.0 * log_2(f1))) / 1200.0)
// Estos son los cents entre la distancia en las frecuencias en una octava para Werckmeister I
// 0, 90, 192, 294, 390, 498, 588, 696, 792, 888, 996, 1092
// Y ahora si seleccionamos la frecuencia inicial como 220 para la octava entre "La220" y "La440" obtenemos:
// [220.000000,231.739428,245.803170,260.720410,275.586176,293.325709,308.977873,328.866835,347.618177,367.438685,391.090780]

// La cual suena
(
Pbind(
	\dur, 0.3,
	\freq, Pseq(# [220.000000,231.739428,245.803170,260.720410,275.586176,293.325709,308.977873,328.866835,347.618177,367.438685,391.090780, 440])
).play;
)

//Para Werckmeister II la distancia en cents esta dada por
// 0, 82, 196, 294, 392, 498, 588, 694, 784, 890, 1004, 1086
// Obteniendo para la octava entre "La220" y "La440"
//[220.000000,230.671035,246.371753,260.720410,275.904730,293.325709,308.977873,328.487132,346.015546,367.863412,392.902185]

// La cual suena:
(
Pbind(
	\dur, 0.3,
	\freq, Pseq(# [220.000000,230.671035,246.371753,260.720410,275.904730,293.325709,308.977873,328.487132,346.015546,367.863412,392.902185, 440])
).play;
)